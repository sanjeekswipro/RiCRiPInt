<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->
<!-- $HopeName: SWprod_hqnrip!clrip:branding:lekit-header.html(EBDSDK_P.1) $ -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"> <title>Harlequin RIP SDK: timeline.c File Reference</title> <h5 style="align: right;"><a href="http://www.globalgraphics.com" target="_blank"><img src="./gg_logo.gif" alt="Global Graphics logo" align="middle" border=0></a><img src="./spacer.gif">Harlequin RIP SDK Documentation</h5> <link href="doxygen.css" rel="stylesheet" type="text/css"> </head> </html> 
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_f4ceec801512d60bf380a72c79092ccf.html">timeline</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_7575cb169043790348aacb4ad0df5163.html">src</a>
  </div>
</div>
<div class="contents">
<h1>timeline.c File Reference</h1>
<p>This file provides the Timeline API.  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="std_8h.html">std.h</a>&quot;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="mem_8h.html">mem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="threadapi_8h.html">threadapi.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="rdrapi_8h.html">rdrapi.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="apis_8h.html">apis.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="eventapi_8h.html">eventapi.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="timelineapi_8h.html">timelineapi.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timeline_8c.html#a90b7eb0aa5bcd2f3d6418cc6164b2635">tl_mark</a> (sw_timeline *tl, sw_tl_state state, int reason)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mark a timeline and all its descendants with a state and reason.  <a href="#a90b7eb0aa5bcd2f3d6418cc6164b2635"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timeline_8c.html#a8880bc8027c0d350958893cc44c44cdd">tl_end</a> (sw_timeline *tl, sw_tl_state state, int reason)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Recurse through children, then issue an Event and discard timeline.  <a href="#a8880bc8027c0d350958893cc44c44cdd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group__timeline.html#ga91d0370ec5a7091e1717d91e51c62bf0">sw_tl_result</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timeline_8c.html#a3cb1d641b9f6adcfe982504f7bc19d00">end_or_abort</a> (sw_tl_ref ref, sw_tl_state state, int reason)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">End or Abort the Timeline.  <a href="#a3cb1d641b9f6adcfe982504f7bc19d00"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__timeline.html#ga91d0370ec5a7091e1717d91e51c62bf0">sw_tl_result</a> timeline_api&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timeline_8c.html#a7bf760bedd6454314e8da5155dc3ca0e">end</a> (sw_tl_ref ref)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">End a Timeline normally.  <a href="#a7bf760bedd6454314e8da5155dc3ca0e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__timeline.html#ga91d0370ec5a7091e1717d91e51c62bf0">sw_tl_result</a> timeline_api&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timeline_8c.html#a64f933daacbb04a81da04ab72c13d143">abort</a> (sw_tl_ref ref, int reason)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Abort a Timeline with a given reason.  <a href="#a64f933daacbb04a81da04ab72c13d143"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This file provides the Timeline API. </p>
<dl class="rcs"><dt><b>HopeName</b></dt><dd>SWtimeline!src:<a class="el" href="timeline_8c.html" title="This file provides the Timeline API.">timeline.c</a>(EBDSDK_P.1) </dd></dl>
<p>Copyright (C) 2011-2013 Global Graphics Software Ltd. All rights reserved. This source code contains the confidential and trade secret information of Global Graphics Software Ltd. It may not be used, copied or distributed for any reason except as set forth in the applicable Global Graphics license agreement.</p>
<p>The Timeline API is used to manage, communicate and negotiate the lifespan of entities; arrange timelines into hierarchies; report state, progress along and extent of timelines; and attribute textual feedback and error messages to timeline hierarchies.</p>
<p>It makes extensive use of the Event system and is independent of the core. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a64f933daacbb04a81da04ab72c13d143"></a><!-- doxytag: member="timeline.c::abort" ref="a64f933daacbb04a81da04ab72c13d143" args="(sw_tl_ref ref, int reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__timeline.html#ga91d0370ec5a7091e1717d91e51c62bf0">sw_tl_result</a> timeline_api abort </td>
          <td>(</td>
          <td class="paramtype">sw_tl_ref&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>reason</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Abort a Timeline with a given reason. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ref</em>&nbsp;</td><td>The Timeline to abort</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>reason</em>&nbsp;</td><td>The reason for the abort</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>SW_TL_SUCCESS if the Timeline ends. SW_TL_ERROR_IN_USE if the Timeline prolongs. SW_TL_ERROR_UNKNOWN if the Timeline cannot be found. </dd></dl>

</div>
</div>
<a class="anchor" id="a7bf760bedd6454314e8da5155dc3ca0e"></a><!-- doxytag: member="timeline.c::end" ref="a7bf760bedd6454314e8da5155dc3ca0e" args="(sw_tl_ref ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__timeline.html#ga91d0370ec5a7091e1717d91e51c62bf0">sw_tl_result</a> timeline_api end </td>
          <td>(</td>
          <td class="paramtype">sw_tl_ref&nbsp;</td>
          <td class="paramname"> <em>ref</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End a Timeline normally. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ref</em>&nbsp;</td><td>The Timeline to end</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>SW_TL_SUCCESS if the Timeline ends. SW_TL_ERROR_IN_USE if the Timeline prolongs. SW_TL_ERROR_UNKNOWN if the Timeline cannot be found. </dd></dl>

</div>
</div>
<a class="anchor" id="a3cb1d641b9f6adcfe982504f7bc19d00"></a><!-- doxytag: member="timeline.c::end_or_abort" ref="a3cb1d641b9f6adcfe982504f7bc19d00" args="(sw_tl_ref ref, sw_tl_state state, int reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group__timeline.html#ga91d0370ec5a7091e1717d91e51c62bf0">sw_tl_result</a> end_or_abort </td>
          <td>(</td>
          <td class="paramtype">sw_tl_ref&nbsp;</td>
          <td class="paramname"> <em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sw_tl_state&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>reason</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>End or Abort the Timeline. </p>
<p>First child priorities are checked, as high priority children prolong the parent. Then a negotiation takes place comprising a number of Events. If this fails, the Timeline prolongs. Otherwise the Timeline and children are marked as dead to prevent new children being added, then all children and finally this Timeline are ended, issuing Events as they go.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ref</em>&nbsp;</td><td>The Timeline to end</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>Either TL_STATE_END or TL_STATE_ABORT</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reason</em>&nbsp;</td><td>The reason for the TL_STATE_ABORT</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>SW_TL_SUCCESS if the Timeline ends. SW_TL_ERROR_IN_USE if the Timeline prolongs. SW_TL_ERROR_UNKNOWN if the Timeline cannot be found. </dd></dl>

</div>
</div>
<a class="anchor" id="a8880bc8027c0d350958893cc44c44cdd"></a><!-- doxytag: member="timeline.c::tl_end" ref="a8880bc8027c0d350958893cc44c44cdd" args="(sw_timeline *tl, sw_tl_state state, int reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tl_end </td>
          <td>(</td>
          <td class="paramtype">sw_timeline *&nbsp;</td>
          <td class="paramname"> <em>tl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sw_tl_state&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>reason</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Recurse through children, then issue an Event and discard timeline. </p>
<p>As Events are issued throughout this process, all the Timelines that are about to be discarded must have had their states changed to dead already, so any Handlers called can't do crazy things. Note that many harmless actions are allowed anyway, because we're lenient.</p>
<p>On entry the mutex is held, but the Timeline in question is not locked. </p>

</div>
</div>
<a class="anchor" id="a90b7eb0aa5bcd2f3d6418cc6164b2635"></a><!-- doxytag: member="timeline.c::tl_mark" ref="a90b7eb0aa5bcd2f3d6418cc6164b2635" args="(sw_timeline *tl, sw_tl_state state, int reason)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void tl_mark </td>
          <td>(</td>
          <td class="paramtype">sw_timeline *&nbsp;</td>
          <td class="paramname"> <em>tl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sw_tl_state&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>reason</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Mark a timeline and all its descendants with a state and reason. </p>
<p>This is necessary because Events are issued while the Timelines are being discarded, so we musn't allow any new children to be added into this part of the hierarchy </p>

</div>
</div>
</div>
<hr size="1"><address style="align: right;">
<!-- $HopeName: SWprod_hqnrip!clrip:branding:footer.html(EBDSDK_P.1) $ -->
<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->

<i><small>For information on other products from Global Graphics, visit <a href="http://www.globalgraphics.com" target="_blank">www.globalgraphics.com</a></small></i></address>
</body>
</html>
