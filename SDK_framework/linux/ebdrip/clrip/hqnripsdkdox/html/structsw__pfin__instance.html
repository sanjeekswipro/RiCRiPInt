<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->
<!-- $HopeName: SWprod_hqnrip!clrip:branding:lekit-header.html(EBDSDK_P.1) $ -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"> <title>Harlequin RIP SDK: sw_pfin_instance Struct Reference</title> <h5 style="align: right;"><a href="http://www.globalgraphics.com" target="_blank"><img src="./gg_logo.gif" alt="Global Graphics logo" align="middle" border=0></a><img src="./spacer.gif">Harlequin RIP SDK Documentation</h5> <link href="doxygen.css" rel="stylesheet" type="text/css"> </head> </html> 
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sw_pfin_instance Struct Reference<br/>
<small>
[<a class="el" href="group__swpfinapi.html">Pluggable Font API</a>]</small>
</h1><!-- doxytag: class="sw_pfin_instance" -->
<p>A structure containing the context of a PFIN module instance call.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;swpfinapi.h&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsw__pfin__api.html">sw_pfin_api</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__pfin__instance.html#ac9978e885d787b1079864faf6e03e6d0">implementation</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the API implementation.  <a href="#ac9978e885d787b1079864faf6e03e6d0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6660a439b4bb207eff5fd3a0fd745070"></a><!-- doxytag: member="sw_pfin_instance::callbacks" ref="a6660a439b4bb207eff5fd3a0fd745070" args="" -->
const <a class="el" href="structsw__pfin__callback__api.html">sw_pfin_callback_api</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__pfin__instance.html#a6660a439b4bb207eff5fd3a0fd745070">callbacks</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">PFIN callback API to the RIP. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsw__memory__instance.html">sw_memory_instance</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__pfin__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5">mem</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A memory allocator instance.  <a href="#ae2c5ef08c7ffc4462f75a498a7d5fde5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsw__blob__factory__instance.html">sw_blob_factory_instance</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__pfin__instance.html#a1454a931208d78fc6244568db754fb06">blob_factory</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A blob factory instance.  <a href="#a1454a931208d78fc6244568db754fb06"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsw__data__api.html">sw_data_api</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__pfin__instance.html#a45292c2554358b218e2f93af42c433ad">data_api</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A structure containing the context of a PFIN module instance call. </p>
<p>This is created by PFIN when a PFIN instance is constructed, and is thereafter used for all subsequent PFIN calls to and from the module until the instance is destroyed.</p>
<p>The instance structure may be subclassed to hold private data by defining a subclass structure containing this structure as its first member, and using the size of that structure as the implementation's instance size. Individual methods may then downcast their instance pointer parameters to subclass pointers, and use the private data. e.g.,</p>
<div class="fragment"><pre class="fragment"> <span class="keyword">typedef</span> <span class="keyword">struct </span>my_instance {
   <a class="code" href="structsw__pfin__instance.html" title="A structure containing the context of a PFIN module instance call.">sw_pfin_instance</a> super ; <span class="comment">// must be first entry</span>
   <span class="keyword">struct </span>my_data *dynamic ;
   <a class="code" href="group__stdtypes.html#gada104807b93ac7cd59dac80d98ba857b" title="32-bit signed integer">int32</a> other_fields ;
 } my_instance ;

 <span class="keyword">static</span> <a class="code" href="group__swpfinapi.html#ga8015d311dd1dcee2c0412eaaefdbc530" title="Type of return values from the sw_pfin_api functions.">sw_pfin_result</a> my_stop(<a class="code" href="structsw__pfin__instance.html" title="A structure containing the context of a PFIN module instance call.">sw_pfin_instance</a> *inst,
                               <a class="code" href="group__swpfinapi.html#ga2f3408e6dd4f7017e8d77f6874813df5" title="Definition context opaque type.">sw_pfin_define_context</a> *context,
                               <a class="code" href="group__swpfinapi.html#ga08201091634c90c540bb8f6b2b18ea87" title="Type for PFIN reason values.">sw_pfin_reason</a> reason)
 {
   my_instance *myinst = (my_instance *)inst ; <span class="comment">// downcast to subclass</span>
   <span class="comment">// free allocated data, if necessary:</span>
   inst-&gt;<a class="code" href="structsw__pfin__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5" title="A memory allocator instance.">mem</a>-&gt;<a class="code" href="structsw__memory__instance.html#a3a56751599f9431bcade7006cf7aaaf9" title="Pointer to the API implementation.">implementation</a>-&gt;<a class="code" href="structsw__memory__api.html#aece6cfd7fc8024a9fc3c436b302eef6a" title="Free a previously allocated block.">free</a>(inst-&gt;<a class="code" href="structsw__pfin__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5" title="A memory allocator instance.">mem</a>, myinst-&gt;dynamic) ;
 } ;

 <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="structsw__pfin__api.html" title="The definition of an implementation of the PFIN interface.">sw_pfin_api</a> my_impl = {
   {
     <a class="code" href="group__swpfinapi.html#gga94798fdadfbf49a7c658ace669a1d310a33ea8212b2d6e539bff6fb8690777172">SW_PFIN_API_VERSION_20071111</a>,
     (<span class="keyword">const</span> <a class="code" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94" title="8-bit unsigned integer">uint8</a> *)<span class="stringliteral">&quot;myname&quot;</span>,
     (<span class="keyword">const</span> <a class="code" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94" title="8-bit unsigned integer">uint8</a> *)(<span class="stringliteral">&quot;A long description of my module implementation&quot;</span>
                     <span class="stringliteral">&quot;Copyright (C) 2007 Global Graphics Software Ltd.&quot;</span>),
     <span class="keyword">sizeof</span>(my_instance), <span class="comment">// RIP will allocate this amount for instance</span>
   },
   <span class="comment">// ...more of sw_pfin_api definition...</span>
   my_stop,
   <span class="comment">// ...rest of sw_pfin_api definition...</span>
 } ;

 <span class="comment">// Call SwRegisterPFIN(&amp;my_impl) after SwInit() to register this module.</span>
</pre></div><p>The RIP will not touch memory beyond the size of the instance structure for the implementation version registered. </p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a1454a931208d78fc6244568db754fb06"></a><!-- doxytag: member="sw_pfin_instance::blob_factory" ref="a1454a931208d78fc6244568db754fb06" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsw__blob__factory__instance.html">sw_blob_factory_instance</a>* <a class="el" href="structsw__pfin__instance.html#a1454a931208d78fc6244568db754fb06">blob_factory</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A blob factory instance. </p>
<p>This factory should be be used to create blob instances when the PFIN module wishes to access font resource data on file systems managed by the RIP. </p>

</div>
</div>
<a class="anchor" id="a45292c2554358b218e2f93af42c433ad"></a><!-- doxytag: member="sw_pfin_instance::data_api" ref="a45292c2554358b218e2f93af42c433ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsw__data__api.html">sw_data_api</a>* <a class="el" href="structsw__pfin__instance.html#a45292c2554358b218e2f93af42c433ad">data_api</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>A data API implementation for accessing <a class="el" href="structsw__datum.html" title="Structured data instance type.">sw_datum</a> objects for this PFIN instance. </p>

</div>
</div>
<a class="anchor" id="ac9978e885d787b1079864faf6e03e6d0"></a><!-- doxytag: member="sw_pfin_instance::implementation" ref="ac9978e885d787b1079864faf6e03e6d0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsw__pfin__api.html">sw_pfin_api</a>* <a class="el" href="structsw__pfin__instance.html#ac9978e885d787b1079864faf6e03e6d0">implementation</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to the API implementation. </p>
<p>API methods for a blob map should always be called by indirecting through the map's implementation field. </p>

</div>
</div>
<a class="anchor" id="ae2c5ef08c7ffc4462f75a498a7d5fde5"></a><!-- doxytag: member="sw_pfin_instance::mem" ref="ae2c5ef08c7ffc4462f75a498a7d5fde5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsw__memory__instance.html">sw_memory_instance</a>* <a class="el" href="structsw__pfin__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5">mem</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A memory allocator instance. </p>
<p>This object is supplied by the RIP so that the PFIN implementation can allocate memory using the RIP's memory allocator. PFIN implementations should use this in preference to malloc() and free(), so that the RIP can track memory allocation and respond to low memory states more effectively. This memory allocator should only be used for allocations local to the module instance. Allocations will be automatically destroyed when the <a class="el" href="structsw__pfin__api.html#a316a46097d622324c9135c4ff822a34e" title="Close down the font module, close files and undefine fonts.">sw_pfin_api::stop()</a> method is called with SW_PFIN_REASON_STOP. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="swpfinapi_8h.html">swpfinapi.h</a></li>
</ul>
</div>
<hr size="1"><address style="align: right;">
<!-- $HopeName: SWprod_hqnrip!clrip:branding:footer.html(EBDSDK_P.1) $ -->
<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->

<i><small>For information on other products from Global Graphics, visit <a href="http://www.globalgraphics.com" target="_blank">www.globalgraphics.com</a></small></i></address>
</body>
</html>
