<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->
<!-- $HopeName: SWprod_hqnrip!clrip:branding:lekit-header.html(EBDSDK_P.1) $ -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"> <title>Harlequin RIP SDK: Atomic operations for multi-thread variable access.</title> <h5 style="align: right;"><a href="http://www.globalgraphics.com" target="_blank"><img src="./gg_logo.gif" alt="Global Graphics logo" align="middle" border=0></a><img src="./spacer.gif">Harlequin RIP SDK Documentation</h5> <link href="doxygen.css" rel="stylesheet" type="text/css"> </head> </html> 
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="hqatomic">Atomic operations for multi-thread variable access. </a></h1><p>We provide a set of minimal atomic operations, which we can support effectively across multiple compilers and processor architectures, using either compiler intrinsics or in-line assembly. The minimal set of operations provided are:</p>
<p>HqAtomicIncrement() - Increment a signed integral value. HqAtomicDecrement() - Decrement a signed integral value. HqAtomicCAS() - Compare and swap two signed integral values. HqAtomicCASPointer() - Compare and swap two pointers.</p>
<p>In principle, all other atomic operations can be built on top of CAS (compare and swap). However, it's just a bit too clunky having to implement some simple operations on top of CAS.</p>
<p>Major compiler versions that support atomic operations are defined first. If the define HQ_ATOMIC_SUPPORTED is not defined, then the architecture specific assembly versions may be used. The equivalent prototypes for the operations implemented are:</p>
<div class="fragment"><pre class="fragment">   <span class="keyword">typedef</span> ... hq_atomic_counter_t ;
</pre></div><p>An integer type suitable for the atomic increment and decrement.</p>
<div class="fragment"><pre class="fragment">   HqAtomicIncrement(hq_atomic_counter_t *ptr, hq_atomic_counter_t&amp; before) ;
</pre></div><p>Atomically increment the contents of <code>*ptr</code>, and return the value before it was incremented in <code>before</code>.</p>
<div class="fragment"><pre class="fragment">   HqAtomicDecrement(hq_atomic_counter_t *ptr, hq_atomic_counter_t&amp; after) ;
</pre></div><p>Atomically decrement the contents of <code>*ptr</code>, and return the value after it was decremented in <code>after</code>.</p>
<div class="fragment"><pre class="fragment">   HqAtomicCAS(hq_atomic_counter_t *ptr, hq_atomic_counter_t compare,
               hq_atomic_counter_t swap, <a class="code" href="group__stdtypes.html#ga647554e4db926121141b7e831337adf7" title="Hqn standard boolean type.">HqBool</a>&amp; swapped) ;
</pre></div><p>Atomically compare the value of <code>*ptr</code> with <code>compare</code>, and if they match, swap the contents of <code>*ptr</code> for <code>swap</code>. Store a boolean in <code>swapped</code> indicating if the swap was performed.</p>
<div class="fragment"><pre class="fragment">   HqAtomicCASPointer(type **ptr, type *compare, type *swap,
                      <a class="code" href="group__stdtypes.html#ga647554e4db926121141b7e831337adf7" title="Hqn standard boolean type.">HqBool</a>&amp; swapped, type) ;
</pre></div><p>Atomically compare the value of <code>*ptr</code> with <code>compare</code>, and if they match, swap the contents of <code>*ptr</code> for <code>swap</code>. Store a boolean in <code>swapped</code> indicating if the swap was performed. (This is the same operation as <code>HqAtomicCAS</code>, but allows pointers to be compared and swapped.) </p>
</div>
<hr size="1"><address style="align: right;">
<!-- $HopeName: SWprod_hqnrip!clrip:branding:footer.html(EBDSDK_P.1) $ -->
<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->

<i><small>For information on other products from Global Graphics, visit <a href="http://www.globalgraphics.com" target="_blank">www.globalgraphics.com</a></small></i></address>
</body>
</html>
