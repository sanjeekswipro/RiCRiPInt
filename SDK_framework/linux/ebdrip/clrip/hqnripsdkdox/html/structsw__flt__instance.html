<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->
<!-- $HopeName: SWprod_hqnrip!clrip:branding:lekit-header.html(EBDSDK_P.1) $ -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"> <title>Harlequin RIP SDK: sw_flt_instance Struct Reference</title> <h5 style="align: right;"><a href="http://www.globalgraphics.com" target="_blank"><img src="./gg_logo.gif" alt="Global Graphics logo" align="middle" border=0></a><img src="./spacer.gif">Harlequin RIP SDK Documentation</h5> <link href="doxygen.css" rel="stylesheet" type="text/css"> </head> </html> 
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structure&nbsp;Index</span></a></li>
      <li><a href="functions.html"><span>Data&nbsp;Fields</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>sw_flt_instance Struct Reference<br/>
<small>
[<a class="el" href="group__PLUGIN__swflt.html">Image filtering API</a>]</small>
</h1><!-- doxytag: class="sw_flt_instance" -->
<p>An instance structure for the filter API implementation.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;swflt.h&gt;</code></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Fields</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsw__flt__api.html">sw_flt_api</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#a153d3f2adb7529536baa106e409531c2">implementation</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Pointer to the API implementation.  <a href="#a153d3f2adb7529536baa106e409531c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsw__memory__instance.html">sw_memory_instance</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5">mem</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A memory allocator instance.  <a href="#ae2c5ef08c7ffc4462f75a498a7d5fde5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsw__flt__ifstore__api.html">sw_flt_ifstore_api</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#a81580c8717db94484f2a604dc21da498">ifstore_api</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Callback API for accessing data blocks.  <a href="#a81580c8717db94484f2a604dc21da498"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsw__flt__instance.html">sw_flt_instance</a> *(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#ae03db194c1d5bc1d66c0fd389d6d9406">previous</a> )(<a class="el" href="structsw__flt__instance.html">sw_flt_instance</a> *curr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsw__flt__image.html">sw_flt_image</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#a5c533f2075699015a52335992948ecc0">image_base</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structsw__flt__image.html">sw_flt_image</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#af18f5bbeb9a9549e94750cd3d14c58de">image_in</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structsw__flt__image.html">sw_flt_image</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#a31a7fef874034874ac899f3dee5c097b">image_out</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__PLUGIN__swflt.html#ga92f1aa6492063d80eb92503cd36e1a7a">sw_flt_store</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structsw__flt__instance.html#aab2a0981772b07d94f72eb99d1ede228">im_store</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>An instance structure for the filter API implementation. </p>
<p>Each instance of a filter needs data describing both the input and output of the filtering process, together with any instance-specific variable data. All of the image instance data is bundled together in the following structure.</p>
<p>The instance structure may be subclassed to hold private data by defining a subclass structure containing this structure as its first member, and using the size of that structure as the implementation's instance size. Individual methods may then downcast their instance pointer parameters to subclass pointers, and use the private data. e.g.,</p>
<div class="fragment"><pre class="fragment"> <span class="keyword">typedef</span> <span class="keyword">struct </span>my_instance {
   <a class="code" href="structsw__flt__instance.html" title="An instance structure for the filter API implementation.">sw_flt_instance</a> super ; <span class="comment">// must be first entry</span>
   <span class="keyword">struct </span>my_data *dynamic ;
   <a class="code" href="group__stdtypes.html#gada104807b93ac7cd59dac80d98ba857b" title="32-bit signed integer">int32</a> other_fields ;
 } my_instance ;

 <span class="keyword">static</span> <a class="code" href="group__PLUGIN__swflt.html#ga7a883b0d4ee75974951e13eb1a2f820d" title="Type of return values from sw_flt_api functions.">sw_flt_result</a> <a class="code" href="ripcall_8h.html#af797d2c5ebe66a006abbbe0adf8c4c82" title="Defines explicit calling convention macro for RIP-exported APIs.">RIPCALL</a> my_destruct(<a class="code" href="structsw__flt__instance.html" title="An instance structure for the filter API implementation.">sw_flt_instance</a> *inst)
 {
   my_instance *myinst = (my_instance *)inst ; <span class="comment">// downcast to subclass</span>
   <span class="comment">// free allocated data, if necessary:</span>
   inst-&gt;<a class="code" href="structsw__flt__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5" title="A memory allocator instance.">mem</a>-&gt;<a class="code" href="structsw__memory__instance.html#a3a56751599f9431bcade7006cf7aaaf9" title="Pointer to the API implementation.">implementation</a>-&gt;<a class="code" href="structsw__memory__api.html#aece6cfd7fc8024a9fc3c436b302eef6a" title="Free a previously allocated block.">free</a>(inst-&gt;<a class="code" href="structsw__flt__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5" title="A memory allocator instance.">mem</a>, myinst-&gt;dynamic) ;
   <span class="keywordflow">return</span> <a class="code" href="group__PLUGIN__swflt.html#gga6b7b47dd702d9e331586d485013fd1eaabf31c1eb8c82be7aab499bed21b4564a">SW_FLT_SUCCESS</a> ;
 } ;

 <span class="keyword">const</span> <span class="keyword">static</span> <a class="code" href="structsw__flt__api.html" title="The definition of an implementation of the image filtering interface.">sw_flt_api</a> my_impl = {
   {
     <a class="code" href="group__PLUGIN__swflt.html#gga80155586fa275b28773c9b203f52cabaa0712665c1f1ba0645168bc66cd423072">SW_FLT_API_VERSION_20071112</a>,
     (<span class="keyword">const</span> <a class="code" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94" title="8-bit unsigned integer">uint8</a> *)<span class="stringliteral">&quot;myname&quot;</span>,
     (<span class="keyword">const</span> <a class="code" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94" title="8-bit unsigned integer">uint8</a> *)(<span class="stringliteral">&quot;A long description of my module implementation&quot;</span>
                     <span class="stringliteral">&quot;Copyright (C) 2007-2013 Global Graphics Software Ltd.&quot;</span>),
     <span class="keyword">sizeof</span>(my_instance), <span class="comment">// RIP will allocate this amount for instance</span>
   },
   <span class="comment">// ...more of sw_flt_api definition...</span>
   my_destruct,
   <span class="comment">// ...rest of sw_flt_api definition...</span>
 } ;

 <span class="comment">// Call SwRegisterFLT(&amp;my_impl) after SwInit() to register this module.</span>
</pre></div><p>The RIP will not touch memory beyond the size of the instance structure for the implementation version registered.</p>
<p>The RIP will initialise the instance variables appropriately before <a class="el" href="structsw__flt__api.html#a3cfd0b10c0338ff0bd43e0c90797f25b" title="Determine if a filter should be run.">sw_flt_api::present()</a> or <a class="el" href="structsw__flt__api.html#ab7afd50aad1409821bfe890096ebd711" title="Prepare an image instance for filtering.">sw_flt_api::construct()</a> are called. The RIP may change so of the instance fields between filter construction and execution. </p>
<hr/><h2>Field Documentation</h2>
<a class="anchor" id="a81580c8717db94484f2a604dc21da498"></a><!-- doxytag: member="sw_flt_instance::ifstore_api" ref="a81580c8717db94484f2a604dc21da498" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsw__flt__ifstore__api.html">sw_flt_ifstore_api</a>* <a class="el" href="structsw__flt__instance.html#a81580c8717db94484f2a604dc21da498">ifstore_api</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback API for accessing data blocks. </p>
<p>This field is filled in by the RIP before <a class="el" href="structsw__flt__api.html#a3cfd0b10c0338ff0bd43e0c90797f25b" title="Determine if a filter should be run.">sw_flt_api::present()</a> or <a class="el" href="structsw__flt__api.html#ab7afd50aad1409821bfe890096ebd711" title="Prepare an image instance for filtering.">sw_flt_api::construct()</a> are called. Initialised by RIP. </p>

</div>
</div>
<a class="anchor" id="aab2a0981772b07d94f72eb99d1ede228"></a><!-- doxytag: member="sw_flt_instance::im_store" ref="aab2a0981772b07d94f72eb99d1ede228" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__PLUGIN__swflt.html#ga92f1aa6492063d80eb92503cd36e1a7a">sw_flt_store</a>* <a class="el" href="structsw__flt__instance.html#aab2a0981772b07d94f72eb99d1ede228">im_store</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This field contains a reference to an image store. This should be used as a context parameter to all of the the <a class="el" href="structsw__flt__ifstore__api.html" title="Callback API for image filter store.">sw_flt_ifstore_api</a> callbacks which take a sw_flt_store parameter. This value is only valid if the <a class="el" href="structsw__flt__api.html#ab7afd50aad1409821bfe890096ebd711" title="Prepare an image instance for filtering.">sw_flt_api::construct()</a> method is successful, it will be NULL before that point. </p>

</div>
</div>
<a class="anchor" id="a5c533f2075699015a52335992948ecc0"></a><!-- doxytag: member="sw_flt_instance::image_base" ref="a5c533f2075699015a52335992948ecc0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsw__flt__image.html">sw_flt_image</a>* <a class="el" href="structsw__flt__instance.html#a5c533f2075699015a52335992948ecc0">image_base</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This field is initialised by RIP to point at the details of the original image, before any filtering was applied. </p>

</div>
</div>
<a class="anchor" id="af18f5bbeb9a9549e94750cd3d14c58de"></a><!-- doxytag: member="sw_flt_instance::image_in" ref="af18f5bbeb9a9549e94750cd3d14c58de" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsw__flt__image.html">sw_flt_image</a>* <a class="el" href="structsw__flt__instance.html#af18f5bbeb9a9549e94750cd3d14c58de">image_in</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This field is initialised by RIP to point at the result of the previous step in the filtering pipeline. </p>

</div>
</div>
<a class="anchor" id="a31a7fef874034874ac899f3dee5c097b"></a><!-- doxytag: member="sw_flt_instance::image_out" ref="a31a7fef874034874ac899f3dee5c097b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsw__flt__image.html">sw_flt_image</a>* <a class="el" href="structsw__flt__instance.html#a31a7fef874034874ac899f3dee5c097b">image_out</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This field contains the details for the result of this image filtering step. The RIP initialises this field to the same values as the input image, and expects the filter to modify these details during the <a class="el" href="structsw__flt__api.html#a3cfd0b10c0338ff0bd43e0c90797f25b" title="Determine if a filter should be run.">sw_flt_api::present()</a> call. If the filter does not change any of the image details, it need not modify this field. </p>

</div>
</div>
<a class="anchor" id="a153d3f2adb7529536baa106e409531c2"></a><!-- doxytag: member="sw_flt_instance::implementation" ref="a153d3f2adb7529536baa106e409531c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structsw__flt__api.html">sw_flt_api</a>* <a class="el" href="structsw__flt__instance.html#a153d3f2adb7529536baa106e409531c2">implementation</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to the API implementation. </p>
<p>API methods for a filter instance should always be called by indirecting through the instance's implementation field.</p>
<p>This field is filled in by the RIP before <a class="el" href="structsw__flt__api.html#a3cfd0b10c0338ff0bd43e0c90797f25b" title="Determine if a filter should be run.">sw_flt_api::present()</a> or <a class="el" href="structsw__flt__api.html#ab7afd50aad1409821bfe890096ebd711" title="Prepare an image instance for filtering.">sw_flt_api::construct()</a> are called. </p>

</div>
</div>
<a class="anchor" id="ae2c5ef08c7ffc4462f75a498a7d5fde5"></a><!-- doxytag: member="sw_flt_instance::mem" ref="ae2c5ef08c7ffc4462f75a498a7d5fde5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsw__memory__instance.html">sw_memory_instance</a>* <a class="el" href="structsw__flt__instance.html#ae2c5ef08c7ffc4462f75a498a7d5fde5">mem</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A memory allocator instance. </p>
<p>This object is supplied by the RIP so that the filter implementation can allocate memory using the RIP's memory allocator. Filter implementations should use this in preference to malloc() and free(), so that the RIP can track memory allocation and respond to low memory states more effectively. </p>

</div>
</div>
<a class="anchor" id="ae03db194c1d5bc1d66c0fd389d6d9406"></a><!-- doxytag: member="sw_flt_instance::previous" ref="ae03db194c1d5bc1d66c0fd389d6d9406" args=")(sw_flt_instance *curr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structsw__flt__instance.html">sw_flt_instance</a>*( * <a class="el" href="structsw__flt__instance.html#ae03db194c1d5bc1d66c0fd389d6d9406">previous</a>)(<a class="el" href="structsw__flt__instance.html">sw_flt_instance</a> *curr)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Callback method to find the previous filter instance, initialised by the RIP. This will only return a non-NULL valid during image pipeline execution. During the <a class="el" href="structsw__flt__api.html#a3cfd0b10c0338ff0bd43e0c90797f25b" title="Determine if a filter should be run.">sw_flt_api::present()</a> and <a class="el" href="structsw__flt__api.html#ab7afd50aad1409821bfe890096ebd711" title="Prepare an image instance for filtering.">sw_flt_api::construct()</a> calls, this will return NULL. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="swflt_8h.html">swflt.h</a></li>
</ul>
</div>
<hr size="1"><address style="align: right;">
<!-- $HopeName: SWprod_hqnrip!clrip:branding:footer.html(EBDSDK_P.1) $ -->
<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->

<i><small>For information on other products from Global Graphics, visit <a href="http://www.globalgraphics.com" target="_blank">www.globalgraphics.com</a></small></i></address>
</body>
</html>
