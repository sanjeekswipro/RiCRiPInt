<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->
<!-- $HopeName: SWprod_hqnrip!clrip:branding:lekit-header.html(EBDSDK_P.1) $ -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"> <title>Harlequin RIP SDK: ramdev.c File Reference</title> <h5 style="align: right;"><a href="http://www.globalgraphics.com" target="_blank"><img src="./gg_logo.gif" alt="Global Graphics logo" align="middle" border=0></a><img src="./spacer.gif">Harlequin RIP SDK Documentation</h5> <link href="doxygen.css" rel="stylesheet" type="text/css"> </head> </html> 
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_19043388fc15ddb67e28f7a33621a223.html">skinkit</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_1a92abee00141eb4bc1b55dcfd46ed15.html">src</a>
  </div>
</div>
<div class="contents">
<h1>ramdev.c File Reference</h1>
<p>Implementation of an input/output device tied to in-memory data.  
<a href="#_details">More...</a></p>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="hqstr_8h.html">hqstr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mem_8h.html">mem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memfs_8h.html">memfs.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="swdevice_8h.html">swdevice.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="skindevs_8h.html">skindevs.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ripthread_8h.html">ripthread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="file_8h.html">file.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sync_8h.html">sync.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__RAMDeviceState.html">_RAMDeviceState</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Encapsulates the state of a single instance of the RAM device.  <a href="struct__RAMDeviceState.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48836c34b4144b67a0c7c9af7ac7b5ac"></a><!-- doxytag: member="ramdev.c::RAMDeviceState" ref="a48836c34b4144b67a0c7c9af7ac7b5ac" args="" -->
typedef struct <a class="el" href="struct__RAMDeviceState.html">_RAMDeviceState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ramdev_8c.html#a48836c34b4144b67a0c7c9af7ac7b5ac">RAMDeviceState</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Encapsulates the state of a single instance of the RAM device. <br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad843828c3202d415e0c7229f8efbcceb"></a><!-- doxytag: member="ramdev.c::szParamType" ref="ad843828c3202d415e0c7229f8efbcceb" args="" -->
static <a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ramdev_8c.html#ad843828c3202d415e0c7229f8efbcceb">szParamType</a> = (<a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a>*) &quot;Type&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Name of the single, read-only device parameter for this device. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e0a161310f4cff4f0a91959ef541d88"></a><!-- doxytag: member="ramdev.c::szParamValueFileSystem" ref="a7e0a161310f4cff4f0a91959ef541d88" args="" -->
static <a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ramdev_8c.html#a7e0a161310f4cff4f0a91959ef541d88">szParamValueFileSystem</a> = (<a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a>*) &quot;FileSystem&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constant value of the <code>/Type</code> device parameter. This allows the RIP to classify this device as a storage medium. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ramdev_8c.html#a273eec36ce6c4870228e989813e60f77">demoData</a> []</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__MFSNODE.html">MFSNODE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ramdev_8c.html#aff903ecd9d01484019fc832959352bbf">demoRoot</a> = { MFS_Directory, FALSE, FALSE, &quot;root&quot;, 0 , &amp;rootDir }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="struct__MFSNODE.html">MFSNODE</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ramdev_8c.html#acd900ede0a17cd5e83852d00f96f59a6">pMFSRoot</a> = 0</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is the root of the RAM device's virtual filesystem.  <a href="#acd900ede0a17cd5e83852d00f96f59a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDeviceType.html">DEVICETYPE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="ramdev_8c.html#af22690d4637c1091c9577c649ea13cd3">RAM_Device_Type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The RAM input device type structure.  <a href="#af22690d4637c1091c9577c649ea13cd3"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Implementation of an input/output device tied to in-memory data. </p>
<p>Useful for backending the os device for embedded systems for which there is no disk, or to help avoid multiple RIP implementations writing caches to a single shared installation. </p>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="a273eec36ce6c4870228e989813e60f77"></a><!-- doxytag: member="ramdev.c::demoData" ref="a273eec36ce6c4870228e989813e60f77" args="[]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a> <a class="el" href="ramdev_8c.html#a273eec36ce6c4870228e989813e60f77">demoData</a>[]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
{ <span class="charliteral">&#39;(&#39;</span>, <span class="charliteral">&#39;H&#39;</span>, <span class="charliteral">&#39;e&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;o&#39;</span>, <span class="charliteral">&#39;,&#39;</span>, <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;w&#39;</span>, <span class="charliteral">&#39;o&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="charliteral">&#39;l&#39;</span>, <span class="charliteral">&#39;d&#39;</span>, <span class="charliteral">&#39;!&#39;</span>, <span class="charliteral">&#39;)&#39;</span>, <span class="charliteral">&#39; &#39;</span>, <span class="charliteral">&#39;=&#39;</span> }
</pre></div><p>FOR DEMONSTRATION PURPOSES The following declarations describe a simple filesystem which could serve as the initial state for the RAM device.</p>
<p>The demonstration tree contains the single file ps/simple.ps, which contains PostScript code to output the string "Hello, World". This could be executed, for example, with the fragment:-</p>
<p>(ram/ps/simple.ps) run</p>
<p>The single demonstration file is read-only. However, the directories are writable, so it is possible to expand the device with new files. </p>

</div>
</div>
<a class="anchor" id="aff903ecd9d01484019fc832959352bbf"></a><!-- doxytag: member="ramdev.c::demoRoot" ref="aff903ecd9d01484019fc832959352bbf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__MFSNODE.html">MFSNODE</a> <a class="el" href="ramdev_8c.html#aff903ecd9d01484019fc832959352bbf">demoRoot</a> = { MFS_Directory, FALSE, FALSE, &quot;root&quot;, 0 , &amp;rootDir }</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The root node has a name ("root"), but this is not actually a part of the pathname for any file in this tree, because all paths are expressed relative to the root node. </p>

</div>
</div>
<a class="anchor" id="acd900ede0a17cd5e83852d00f96f59a6"></a><!-- doxytag: member="ramdev.c::pMFSRoot" ref="acd900ede0a17cd5e83852d00f96f59a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__MFSNODE.html">MFSNODE</a>* <a class="el" href="ramdev_8c.html#acd900ede0a17cd5e83852d00f96f59a6">pMFSRoot</a> = 0<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is the root of the RAM device's virtual filesystem. </p>
<p>The current implementation of the RAM device permits for only a single filesystem root. However, like the file device, the RAM device supports prefixes. Therefore, even with a single root, it is possible for multiple instances of the RAM device to exist independantly of each other, using prefixes to navigate down to a specified node under the master root.</p>
<p>This variable is initialized to <code>NULL</code>, which allows the RAM device to detect when its first instance is being mounted. This is the point at which it chooses the master root node, whose pointer is assigned to this variable. When subsequent instances are mounted, the same root pointer is re-used. See <code>ramdev_init_device()</code>.</p>
<p>The master root pointer is decided based on the configuration of the RIP skin library. If the SW folder is on disk, the role of the RAM device is minor: it just becomes another example device. In this case, it is initialized to the <code>demoRoot</code>. If the SW folder is compiled into memory, the RAM device takes on the role of the RIP's primary resource storage device (the "os" device). In this case, the root node is <code>pSWRam</code>, which is the root of the imported SW folder data. Finally, if the SW folder is used in "hybrid" mode (where the SW folder exists on disk, but is read-only), the RAM device is initialized to an empty root, which becomes populated as the SW folder is modified, since this is not permitted on disk. </p>

</div>
</div>
<a class="anchor" id="af22690d4637c1091c9577c649ea13cd3"></a><!-- doxytag: member="ramdev.c::RAM_Device_Type" ref="af22690d4637c1091c9577c649ea13cd3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDeviceType.html">DEVICETYPE</a> <a class="el" href="ripthread_8c.html#af22690d4637c1091c9577c649ea13cd3">RAM_Device_Type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The RAM input device type structure. </p>
<p>externally defined device types of the sub-devices of this device. </p>

</div>
</div>
</div>
<hr size="1"><address style="align: right;">
<!-- $HopeName: SWprod_hqnrip!clrip:branding:footer.html(EBDSDK_P.1) $ -->
<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->

<i><small>For information on other products from Global Graphics, visit <a href="http://www.globalgraphics.com" target="_blank">www.globalgraphics.com</a></small></i></address>
</body>
</html>
