<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->
<!-- $HopeName: SWprod_hqnrip!clrip:branding:lekit-header.html(EBDSDK_P.1) $ -->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> <html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"> <title>Harlequin RIP SDK: hybridev.c File Reference</title> <h5 style="align: right;"><a href="http://www.globalgraphics.com" target="_blank"><img src="./gg_logo.gif" alt="Global Graphics logo" align="middle" border=0></a><img src="./spacer.gif">Harlequin RIP SDK Documentation</h5> <link href="doxygen.css" rel="stylesheet" type="text/css"> </head> </html> 
<!-- Generated by Doxygen 1.6.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_19043388fc15ddb67e28f7a33621a223.html">skinkit</a>&nbsp;&raquo;&nbsp;<a class="el" href="dir_1a92abee00141eb4bc1b55dcfd46ed15.html">src</a>
  </div>
</div>
<div class="contents">
<h1>hybridev.c File Reference</h1>
<p>Implementation of hybrid device intended for a read-only SW folder. on disk. In this case, the SW folder can be shared by more than one RIP.  
<a href="#_details">More...</a></p>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="hqstr_8h.html">hqstr.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="mem_8h.html">mem.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="memfs_8h.html">memfs.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="swdevice_8h.html">swdevice.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="skindevs_8h.html">skindevs.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ripthread_8h.html">ripthread.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="file_8h.html">file.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="sync_8h.html">sync.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="skinkit_8h.html">skinkit.h</a>&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structHybridFile.html">HybridFile</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">For file descriptors of this device.  <a href="structHybridFile.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__HybriDeviceState.html">_HybriDeviceState</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Encapsulates the state of a single instance of this device.  <a href="struct__HybriDeviceState.html#_details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct__HybridDeviceIterate.html">_HybridDeviceIterate</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iteration state of this device.  <a href="struct__HybridDeviceIterate.html#_details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2eb963cb846bf5252e2c8acf6088659c"></a><!-- doxytag: member="hybridev.c::HybriDeviceState" ref="a2eb963cb846bf5252e2c8acf6088659c" args="" -->
typedef struct <a class="el" href="struct__HybriDeviceState.html">_HybriDeviceState</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#a2eb963cb846bf5252e2c8acf6088659c">HybriDeviceState</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Encapsulates the state of a single instance of this device. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a951a861b24c2cb05b2a08f49ea5dc4d5"></a><!-- doxytag: member="hybridev.c::HybridDeviceIterate" ref="a951a861b24c2cb05b2a08f49ea5dc4d5" args="" -->
typedef struct <a class="el" href="struct__HybridDeviceIterate.html">_HybridDeviceIterate</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#a951a861b24c2cb05b2a08f49ea5dc4d5">HybridDeviceIterate</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Iteration state of this device. <br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade6faf7c7a9e4dff4e45db141281bb40"></a><!-- doxytag: member="hybridev.c::mountSubDevice" ref="ade6faf7c7a9e4dff4e45db141281bb40" args="(DEVICELIST *dev, DEVICELIST **pSub, char *subname, DEVICETYPE *subdevtype)" -->
static <a class="el" href="group__stdtypes.html#gada104807b93ac7cd59dac80d98ba857b">int32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#ade6faf7c7a9e4dff4e45db141281bb40">mountSubDevice</a> (<a class="el" href="structdevicelist.html">DEVICELIST</a> *dev, <a class="el" href="structdevicelist.html">DEVICELIST</a> **pSub, char *subname, <a class="el" href="structDeviceType.html">DEVICETYPE</a> *subdevtype)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Mount ram or disk sub-device for the hybrid device. Note that the mount is different from the standard "mount" in that the device is not added to the global device list. It remains local to this device and cannot be found by name outside. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4546feca78644a22df44b93f1253c74c"></a><!-- doxytag: member="hybridev.c::dismountSubDevice" ref="a4546feca78644a22df44b93f1253c74c" args="(DEVICELIST **pSub)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#a4546feca78644a22df44b93f1253c74c">dismountSubDevice</a> (<a class="el" href="structdevicelist.html">DEVICELIST</a> **pSub)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dismount ram or disk sub-device for the hybrid device. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5b9d541170543e6aa8101974556f069e"></a><!-- doxytag: member="hybridev.c::openFileAndRegister" ref="a5b9d541170543e6aa8101974556f069e" args="(DEVICELIST *dev, uint8 *filename, int32 openflags)" -->
static DEVICE_FILEDESCRIPTOR&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#a5b9d541170543e6aa8101974556f069e">openFileAndRegister</a> (<a class="el" href="structdevicelist.html">DEVICELIST</a> *dev, <a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a> *filename, <a class="el" href="group__stdtypes.html#gada104807b93ac7cd59dac80d98ba857b">int32</a> openflags)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open the file on sub-device, and register that in this device's state. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae7ead50268ef6c9e91623596ba7528bd"></a><!-- doxytag: member="hybridev.c::loadFileFromDiskToRam" ref="ae7ead50268ef6c9e91623596ba7528bd" args="(DEVICELIST *dev, uint8 *filename)" -->
static <a class="el" href="group__stdtypes.html#gada104807b93ac7cd59dac80d98ba857b">int32</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#ae7ead50268ef6c9e91623596ba7528bd">loadFileFromDiskToRam</a> (<a class="el" href="structdevicelist.html">DEVICELIST</a> *dev, <a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a> *filename)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Loading the file from disk to ram. This is called when a disk file is opened for write. We disallow disk files to be modified. If such a request arises, we copy the file to ram and the modification is carried out on the ram copy. <br/></td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af22690d4637c1091c9577c649ea13cd3"></a><!-- doxytag: member="hybridev.c::RAM_Device_Type" ref="af22690d4637c1091c9577c649ea13cd3" args="" -->
<a class="el" href="structDeviceType.html">DEVICETYPE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#af22690d4637c1091c9577c649ea13cd3">RAM_Device_Type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">externally defined device types of the sub-devices of this device. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structDeviceType.html">DEVICETYPE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#ad55a532bb0e6a0c550c1575fff36da0d">Fs_Device_Type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The device type structure for the file system devices. This is a specific example of the structure defined in PR5.8.  <a href="#ad55a532bb0e6a0c550c1575fff36da0d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad843828c3202d415e0c7229f8efbcceb"></a><!-- doxytag: member="hybridev.c::szParamType" ref="ad843828c3202d415e0c7229f8efbcceb" args="" -->
static <a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#ad843828c3202d415e0c7229f8efbcceb">szParamType</a> = (<a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a>*) &quot;Type&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Name of the device parameter for this device. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7e0a161310f4cff4f0a91959ef541d88"></a><!-- doxytag: member="hybridev.c::szParamValueFileSystem" ref="a7e0a161310f4cff4f0a91959ef541d88" args="" -->
static <a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#a7e0a161310f4cff4f0a91959ef541d88">szParamValueFileSystem</a> = (<a class="el" href="group__stdtypes.html#ga3c77e3a247345b581bdb6939ffe95a94">uint8</a>*) &quot;FileSystem&quot;</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constant value of the <code>/Type</code> device parameter. This allows the RIP to classify this device as a storage medium. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a62bedc8d24d6f2ee8bae75f96c21019b"></a><!-- doxytag: member="hybridev.c::Hybrid_Device_Type" ref="a62bedc8d24d6f2ee8bae75f96c21019b" args="" -->
<a class="el" href="structDeviceType.html">DEVICETYPE</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="hybridev_8c.html#a62bedc8d24d6f2ee8bae75f96c21019b">Hybrid_Device_Type</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The RAM input device type structure. <br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Implementation of hybrid device intended for a read-only SW folder. on disk. In this case, the SW folder can be shared by more than one RIP. </p>
<p>Please note the following restrictions 1) The disk file was assumed read-only. Any attempts to modify it would be done in ram. This implies that the change will not be persistent, ie, lost after each RIP session. 2) Any attempts to delete or rename a disk file is disallowed. </p>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ad55a532bb0e6a0c550c1575fff36da0d"></a><!-- doxytag: member="hybridev.c::Fs_Device_Type" ref="ad55a532bb0e6a0c550c1575fff36da0d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structDeviceType.html">DEVICETYPE</a> <a class="el" href="ripthread_8c.html#ad55a532bb0e6a0c550c1575fff36da0d">Fs_Device_Type</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The device type structure for the file system devices. This is a specific example of the structure defined in PR5.8. </p>
<p>Points to note: (a) of the function pointers included in this structure, only the tickle function may be a NULL pointer. The rest must be filled in with stub routines which at least set the last error flag appropriately. The dismount call does nothing else but indicates success with its return code; however the buffer size function indicates failure, which means that a fixed size buffer will be allocated see PR5.8.2 and PR5.8.26. (b) the device is "relative" (it can support named files, unlike, for example, a serial line). This means that when an attempt is made to open a named file in PostScript unqualified by a device, devices of this type will each receive open requests until one does not report an "undefined" error. See PR5.8.2 (c) the device is "writable": this means that devices of this type will be considered when trying to open a file for writing from PostScript. </p>

</div>
</div>
</div>
<hr size="1"><address style="align: right;">
<!-- $HopeName: SWprod_hqnrip!clrip:branding:footer.html(EBDSDK_P.1) $ -->
<!-- Copyright (C) 2007 Global Graphics Software Ltd. All rights reserved. -->
<!-- Global Graphics Software Ltd. Confidential Information. -->

<i><small>For information on other products from Global Graphics, visit <a href="http://www.globalgraphics.com" target="_blank">www.globalgraphics.com</a></small></i></address>
</body>
</html>
